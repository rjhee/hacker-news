{"version":3,"sources":["app.js"],"names":["ajax","XMLHttpRequest","content","document","createElement","NEWS_URL","CONTENT_URL","container","getElementById","store","currentPage","feeds","getData","url","open","send","JSON","parse","response","makeFeeds","i","length","read","newsFeed","newsList","template","push","id","title","comments_count","user","points","time_ago","replace","join","innerHTML","newsDetail","location","hash","substr","newsContent","Number","makeComment","comments","called","commentString","router","routerPath","indexOf","window","addEventListener"],"mappings":"AAAA,IAAMA,IAAI,GAAG,IAAIC,cAAJ,EAAb;AACA,IAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAhB;AACA,IAAMC,QAAQ,GAAG,sCAAjB;AACA,IAAMC,WAAW,GAAG,wCAApB;AACA,IAAMC,SAAS,GAAGJ,QAAQ,CAACK,cAAT,CAAwB,MAAxB,CAAlB;AACA,IAAMC,KAAK,GAAG;AACZC,EAAAA,WAAW,EAAE,CADD;AAEZC,EAAAA,KAAK,EAAE;AAFK,CAAd;;AAKA,SAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACpBb,EAAAA,IAAI,CAACc,IAAL,CAAU,KAAV,EAAiBD,GAAjB,EAAsB,KAAtB;AACAb,EAAAA,IAAI,CAACe,IAAL;AAEA,SAAOC,IAAI,CAACC,KAAL,CAAWjB,IAAI,CAACkB,QAAhB,CAAP;AACD;;AAED,SAASC,SAAT,CAAmBR,KAAnB,EAA0B;AACxB,OAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGT,KAAK,CAACU,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACrCT,IAAAA,KAAK,CAACS,CAAD,CAAL,CAASE,IAAT,GAAgB,KAAhB;AACD;;AACD,SAAOX,KAAP;AACD;;AAED,SAASY,QAAT,GAAoB;AAClB,MAAIA,QAAQ,GAAGd,KAAK,CAACE,KAArB;AACA,MAAMa,QAAQ,GAAG,EAAjB;AACA,MAAIC,QAAQ,gYAAZ;;AAkBA,MAAIF,QAAQ,CAACF,MAAT,KAAoB,CAAxB,EAA2B;AACzBE,IAAAA,QAAQ,GAAGd,KAAK,CAACE,KAAN,GAAcQ,SAAS,CAACP,OAAO,CAACP,QAAD,CAAR,CAAlC;AACD;;AAED,OAAK,IAAIe,CAAC,GAAG,CAACX,KAAK,CAACC,WAAN,GAAoB,CAArB,IAA0B,EAAvC,EAA2CU,CAAC,GAAGX,KAAK,CAACC,WAAN,GAAoB,EAAnE,EAAuEU,CAAC,EAAxE,EAA4E;AAC1EI,IAAAA,QAAQ,CAACE,IAAT,4CAEEH,QAAQ,CAACH,CAAD,CAAR,CAAYE,IAAZ,GACI,kCADJ,GAEI,iCAJN,uCAMoBC,QAAQ,CAACH,CAAD,CAAR,CAAYO,EANhC,mEAQUJ,QAAQ,CAACH,CAAD,CAAR,CAAYQ,KARtB,4DASoCL,QAAQ,CAACH,CAAD,CAAR,CAAYS,cAThD,qKAccN,QAAQ,CAACH,CAAD,CAAR,CAAYU,IAd1B,kIAkBcP,QAAQ,CAACH,CAAD,CAAR,CAAYW,MAlB1B,kIAsBcR,QAAQ,CAACH,CAAD,CAAR,CAAYY,QAtB1B;AA4BD;;AAEDP,EAAAA,QAAQ,GAAGA,QAAQ,CAACQ,OAAT,CAAiB,mBAAjB,EAAsCT,QAAQ,CAACU,IAAT,CAAc,EAAd,CAAtC,CAAX;AACAT,EAAAA,QAAQ,GAAGA,QAAQ,CAACQ,OAAT,CACT,mBADS,EAETxB,KAAK,CAACC,WAAN,GAAoB,CAApB,GAAwBD,KAAK,CAACC,WAAN,GAAoB,CAA5C,GAAgD,CAFvC,CAAX;AAIAe,EAAAA,QAAQ,GAAGA,QAAQ,CAACQ,OAAT,CAAiB,mBAAjB,EAAsCxB,KAAK,CAACC,WAAN,GAAoB,CAA1D,CAAX;AACAH,EAAAA,SAAS,CAAC4B,SAAV,GAAsBV,QAAtB;AACD;;AAED,SAASW,UAAT,GAAsB;AACpB,MAAMT,EAAE,GAAGU,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB,CAArB,CAAX;AACA,MAAMC,WAAW,GAAG5B,OAAO,CAACN,WAAW,CAAC2B,OAAZ,CAAoB,KAApB,EAA2BN,EAA3B,CAAD,CAA3B;AACA,MAAIF,QAAQ,oGAGYhB,KAAK,CAACC,WAHlB,kMASA8B,WAAW,CAACZ,KATZ,+EAYJY,WAAW,CAACtC,OAZR,yHAAZ;;AAoBA,OAAK,IAAIkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,KAAK,CAACE,KAAN,CAAYU,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3C,QAAIX,KAAK,CAACE,KAAN,CAAYS,CAAZ,EAAeO,EAAf,KAAsBc,MAAM,CAACd,EAAD,CAAhC,EAAsC;AACpClB,MAAAA,KAAK,CAACE,KAAN,CAAYS,CAAZ,EAAeE,IAAf,GAAsB,IAAtB;AACA;AACD;AACF;;AAED,WAASoB,WAAT,CAAqBC,QAArB,EAA2C;AAAA,QAAZC,MAAY,uEAAH,CAAG;AACzC,QAAMC,aAAa,GAAG,EAAtB;;AACA,SAAK,IAAIzB,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGuB,QAAQ,CAACtB,MAA7B,EAAqCD,EAAC,EAAtC,EAA0C;AACxCyB,MAAAA,aAAa,CAACnB,IAAd,oEACgDkB,MAAM,GAAG,EADzD,4QAQcD,QAAQ,CAACvB,EAAD,CAAR,CAAYU,IAR1B,0IAYca,QAAQ,CAACvB,EAAD,CAAR,CAAYY,QAZ1B,6GAgBMW,QAAQ,CAACvB,EAAD,CAAR,CAAYlB,OAhBlB;;AAqBA,UAAIyC,QAAQ,CAACvB,EAAD,CAAR,CAAYuB,QAAZ,CAAqBtB,MAArB,GAA8B,CAAlC,EAAqC;AACnCwB,QAAAA,aAAa,CAACnB,IAAd,CAAmBgB,WAAW,CAACC,QAAQ,CAACvB,EAAD,CAAR,CAAYuB,QAAb,EAAuBC,MAAM,GAAG,CAAhC,CAA9B;AACD;AACF;;AAED,WAAOC,aAAa,CAACX,IAAd,CAAmB,EAAnB,CAAP;AACD;;AACD3B,EAAAA,SAAS,CAAC4B,SAAV,GAAsBV,QAAQ,CAACQ,OAAT,CACpB,kBADoB,EAEpBS,WAAW,CAACF,WAAW,CAACG,QAAb,CAFS,CAAtB;AAID;;AAED,SAASG,MAAT,GAAkB;AAChB,MAAMC,UAAU,GAAGV,QAAQ,CAACC,IAA5B;;AAEA,MAAIS,UAAU,KAAK,EAAnB,EAAuB;AACrBxB,IAAAA,QAAQ;AACT,GAFD,MAEO,IAAIwB,UAAU,CAACC,OAAX,CAAmB,SAAnB,KAAiC,CAArC,EAAwC;AAC7CvC,IAAAA,KAAK,CAACC,WAAN,GAAoB+B,MAAM,CAACM,UAAU,CAACR,MAAX,CAAkB,CAAlB,CAAD,CAA1B;AACAhB,IAAAA,QAAQ;AACT,GAHM,MAGA;AACLa,IAAAA,UAAU;AACX;AACF;;AAEDa,MAAM,CAACC,gBAAP,CAAwB,YAAxB,EAAsC,YAAM;AAC1CJ,EAAAA,MAAM;AACP,CAFD;AAIAA,MAAM","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["const ajax = new XMLHttpRequest();\nconst content = document.createElement('div');\nconst NEWS_URL = 'https://api.hnpwa.com/v0/news/1.json';\nconst CONTENT_URL = 'https://api.hnpwa.com/v0/item/@id.json';\nconst container = document.getElementById('root');\nconst store = {\n  currentPage: 1,\n  feeds: [],\n};\n\nfunction getData(url) {\n  ajax.open('GET', url, false);\n  ajax.send();\n\n  return JSON.parse(ajax.response);\n}\n\nfunction makeFeeds(feeds) {\n  for (let i = 0; i < feeds.length; i++) {\n    feeds[i].read = false;\n  }\n  return feeds;\n}\n\nfunction newsFeed() {\n  let newsFeed = store.feeds;\n  const newsList = [];\n  let template = `\n  <section class=\"main\">\n    <header class=\"title\">\n      <h1>Hacker News</h1>\n    </header>\n    <main class=\"news-list\">\n      {{__news_feed__}}\n    </main>\n    <div class=\"pagination\">\n      <a href=\"#/page/{{__prev_page__}}\">\n        Previous\n      </a>\n      <a href=\"#/page/{{__next_page__}}\">\n        Next\n      </a>\n    </div>\n  </section>\n  `;\n  if (newsFeed.length === 0) {\n    newsFeed = store.feeds = makeFeeds(getData(NEWS_URL));\n  }\n\n  for (let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++) {\n    newsList.push(`\n    <section class=\"content\" ${\n      newsFeed[i].read\n        ? 'style=\"background-color:#d3eedb;'\n        : 'style=\"background-color:#fff\"\";'\n    }>\n      <a href=\"#/show/${newsFeed[i].id}\">\n      <div class=\"content-title\">\n        <h2>${newsFeed[i].title}</h2>\n        <span class=\"content-comment\">${newsFeed[i].comments_count}</span>\n      </div>\n      <div class=\"content-info\">\n        <div class=\"user-name\">\n          <i class=\"fas fa-user\"></i> \n          <span>${newsFeed[i].user}</span>\n        </div>\n        <div class=\"like\">\n          <i class=\"fas fa-thumbs-up\"></i>\n          <span>${newsFeed[i].points}</span>\n        </div>\n        <div class=\"time-ago\">\n          <i class=\"far fa-clock\"></i>\n          <span>${newsFeed[i].time_ago}</span>\n        </div>\n      </div>\n      </a>\n    </section>\n  `);\n  }\n\n  template = template.replace('{{__news_feed__}}', newsList.join(''));\n  template = template.replace(\n    '{{__prev_page__}}',\n    store.currentPage > 1 ? store.currentPage - 1 : 1\n  );\n  template = template.replace('{{__next_page__}}', store.currentPage + 1);\n  container.innerHTML = template;\n}\n\nfunction newsDetail() {\n  const id = location.hash.substr(7);\n  const newsContent = getData(CONTENT_URL.replace('@id', id));\n  let template = `\n    <header class=\"title\">  \n      <h1>Hacker News</h1>\n        <a href=\"#/page/${store.currentPage}\" class=\"pagination\">\n          <i class=\"fas fa-times\"></i>\n        </a>\n    </header>\n    <section class=\"contents\">\n      <div class=\"contents-title\">\n        <h2>${newsContent.title}</h2>\n      </div>\n      <div class=\"contents-main\">\n        ${newsContent.content}\n      </div>\n      <div class=\"contents-comment\">\n        {{__comments__}}\n      </div>\n      </section>\n  `;\n\n  for (let i = 0; i < store.feeds.length; i++) {\n    if (store.feeds[i].id === Number(id)) {\n      store.feeds[i].read = true;\n      break;\n    }\n  }\n\n  function makeComment(comments, called = 0) {\n    const commentString = [];\n    for (let i = 0; i < comments.length; i++) {\n      commentString.push(`\n      <div class=\"comments-box\" style=\"padding-left:${called * 40}px;\">\n        <div class=\"comments-info\">\n          <div class=\"comments-icon\">\n            <i class=\"far fa-comment-alt\"></i>\n          </div>\n          <div class=\"user-name\">\n            <i class=\"fas fa-user\"></i> \n            <span>${comments[i].user}</span>\n          </div>\n          <div class=\"time-ago\">\n            <i class=\"far fa-clock\"></i>\n            <span>${comments[i].time_ago}</span>\n          </div>    \n        </div>\n        <div class=\"comments-main\">\n          ${comments[i].content}\n        </div>\n      </div>\n        \n      `);\n      if (comments[i].comments.length > 0) {\n        commentString.push(makeComment(comments[i].comments, called + 1));\n      }\n    }\n\n    return commentString.join('');\n  }\n  container.innerHTML = template.replace(\n    '{{__comments__}}',\n    makeComment(newsContent.comments)\n  );\n}\n\nfunction router() {\n  const routerPath = location.hash;\n\n  if (routerPath === '') {\n    newsFeed();\n  } else if (routerPath.indexOf('#/page/') >= 0) {\n    store.currentPage = Number(routerPath.substr(7));\n    newsFeed();\n  } else {\n    newsDetail();\n  }\n}\n\nwindow.addEventListener('hashchange', () => {\n  router();\n});\n\nrouter();\n"]}